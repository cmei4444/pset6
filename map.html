<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>D3 PSET</title>
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.7.4/d3.js"></script>
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet"> -->
    <script src="https://d3js.org/d3.v5.min.js" charset="utf-8"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
		<style type="text/css">
      .counties {
        fill: none;
      }

      .states {
        fill: none;
        stroke: #fff;
        stroke-linejoin: round;
      }
		</style>
		</head>
		<body>
		<div id="main"></div>

		<script type="text/javascript">
      var bosJSON='https://gist.githubusercontent.com/cesandoval/09b2e39263c748fbcb84b927cecc7c46/raw/ab71d3638efd2545ec99c2651c6f2ddcea9d2a07/boston.json'
      var bosData ="https://raw.githubusercontent.com/brookefzy/BigData2020/master/pset6/boston_311.csv"

      var width = 700
      var height = 580

      var path = d3.geoPath()

      var svg = d3.select("body")
                  .append("svg")
                  .attr("width", width)
                  .attr("height", height)

      //Append empty placeholder g element to the svg
      //g will contain geometry elements
      // var g = svg.append("g")

      // var albersProjection = d3.geoAlbers()
      //     .scale( 190000)
      //     .rotate([71.057, 0])
      //     .center([0, 42.313])
      //     .translate([width/2, height/2])

      // d3.json(bosJSON).then(function(bosNeighbor){
      //     //6. Bind the data to svg canvas
      //     //Classic D3, select non-existent elements, bind the data, append the elements, and apply attributes
      //     console.log(bosNeighbor)
      //
      //     g.selectAll("path")
      //         .data(bosNeighbor.arcs)
      //         .enter()
      //         .append("path")
      //         .attr("fill", "#ccc")
      //         .attr("stroke", "#333")
      //         .attr("d",path)
      // })

      d3.json(bosJSON).then(ready)

      function ready(bos) {
        console.log(bos)
          svg.append("g")
              .selectAll("path")
              .data(topojson.feature(bos, bos.objects.boston_neigh).features)
              .enter()
              .append("path")
              .style("fill","white")
              .style("stroke","black")
              .attr("d", path)
              .append("title");
      }


      // var unemployment = d3.map();
      //
      // var x = d3.scaleLinear()
      //     .domain([1, 10])
      //     .rangeRound([600, 860]);
      //
      // var color = d3.scaleThreshold()
      //     .domain(d3.range(2, 10))
      //     .range(d3.schemeBlues[9]);
      //
      // var g = svg.append("g")
      //     .attr("class", "key")
      //     .attr("transform", "translate(0,40)");
      //
      // g.selectAll("rect")
      //     .data(color.range().map(function(d) {
      //         d = color.invertExtent(d);
      //         if (d[0] == null) d[0] = x.domain()[0];
      //         if (d[1] == null) d[1] = x.domain()[1];
      //         return d;
      //     }))
      //     .enter().append("rect")
      //     .attr("height", 8)
      //     .attr("x", function(d) { return x(d[0]); })
      //     .attr("width", function(d) { return x(d[1]) - x(d[0]); })
      //     .attr("fill", function(d) { return color(d[0]); });
      //
      // g.append("text")
      //     .attr("class", "caption")
      //     .attr("x", x.range()[0])
      //     .attr("y", -6)
      //     .attr("fill", "#000")
      //     .attr("text-anchor", "start")
      //     .attr("font-weight", "bold")
      //     .text("Unemployment rate");
      //
      // g.call(d3.axisBottom(x)
      // .tickSize(13)
      // .tickFormat(function(x, i) { return i ? x : x + "%"; })
      // .tickValues(color.domain()))
      // .select(".domain")
      // .remove();
      //
      // var promises = [
      //                 d3.json(uscountyurl),
      //                 d3.csv(unemploymenturl, function(d) { unemployment.set(d.id, +d.rate); })
      //                 ]
      //
      // Promise.all(promises).then(ready)
      //
      // function ready([us]) {
      //     console.log(us)
      //     console.log(unemployment)
      // svg.append("g")
      //     .attr("class", "counties")
      //     .selectAll("path")
      //     .data(topojson.feature(us, us.objects.counties).features)
      //     .enter().append("path")
      //     .attr("fill", function(d) { return color(d.rate = unemployment.get(d.id)); })
      //     .attr("d", path)
      //     .append("title")
      //     .text(function(d) { return d.rate + "%"; });
      //
      // svg.append("path")
      //     .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; }))
      //     .attr("class", "states")
      //     .attr("d", path);
      // }

		</script>
	</body>
</html>
